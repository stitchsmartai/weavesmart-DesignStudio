@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom global styles */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* {
  box-sizing: border-box;
}

/* Animations */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* ============================================
   MOBILE RESPONSIVE STYLES
   ============================================ */

/* Touch-friendly tap targets (minimum 44x44px for iOS, 48x48px for Android) */
@media (max-width: 768px) {

  /* Increase button sizes for touch */
  button {
    min-width: 44px;
    min-height: 44px;
  }

  /* Prevent text selection on touch */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Smooth scrolling for mobile */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Optimize tap highlight */
  * {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  }
}

/* Portrait Mode (Mobile Phones) */
@media (max-width: 768px) and (orientation: portrait) {

  /* Reduce header padding */
  header {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    padding-top: 0.75rem !important;
    padding-bottom: 0.75rem !important;
  }

  /* Hide button text, show only icons on very small screens */
  @media (max-width: 480px) {
    header button span {
      display: none;
    }

    header button {
      padding-left: 0.75rem !important;
      padding-right: 0.75rem !important;
    }
  }

  /* Sidebar adjustments */
  .design-library-sidebar {
    width: 100% !important;
    max-width: 288px !important;
    /* 18rem = 288px */
    min-width: 0 !important;
  }

  .design-library-sidebar * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Canvas adjustments */
  .saree-canvas-container {
    padding: 0.5rem !important;
  }

  /* Zoom controls - move to bottom right on mobile portrait */
  .zoom-controls-mobile {
    position: fixed !important;
    bottom: 1rem !important;
    right: 1rem !important;
    top: auto !important;
  }
}

/* Landscape Mode (Mobile Phones & Tablets) */
@media (max-width: 1024px) and (orientation: landscape) {

  /* Keep desktop-like layout but optimize spacing */
  header {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }

  /* Reduce sidebar width significantly in landscape */
  .design-library-sidebar {
    width: 240px !important;
    max-width: 240px !important;
    min-width: 240px !important;
  }

  /* Force all children to fit within sidebar */
  .design-library-sidebar * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Make grids 2 columns in landscape */
  .design-library-sidebar .grid {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }

  /* Reduce padding in landscape */
  .design-library-sidebar>div {
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }

  /* Ensure all grid items fit */
  .design-library-sidebar .grid>* {
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Make template/motif images smaller in landscape - more specific */
  .design-library-sidebar .grid>button,
  .design-library-sidebar .grid>div {
    max-height: 150px !important;
    height: auto !important;
  }

  .design-library-sidebar .grid>button>*,
  .design-library-sidebar .grid>div>* {
    max-height: 120px !important;
    object-fit: contain !important;
  }

  /* Scale down motif/template buttons */
  .design-library-sidebar button {
    font-size: 0.75rem !important;
    padding: 0.5rem !important;
  }

  /* Make section headers smaller */
  .design-library-sidebar h2,
  .design-library-sidebar h3 {
    font-size: 0.875rem !important;
  }

  /* Reduce gap between items */
  .design-library-sidebar .grid {
    gap: 0.5rem !important;
  }

  /* Optimize canvas spacing */
  .saree-canvas-container {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }
}

/* Tablet Portrait */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {

  /* Keep desktop layout but optimize */
  .design-library-sidebar {
    width: 320px !important;
  }
}

/* Small phones (iPhone SE, etc.) */
@media (max-width: 375px) {

  /* Further reduce spacing */
  .saree-canvas-container {
    padding: 0.25rem !important;
  }

  /* Smaller zoom control buttons */
  .zoom-controls-mobile button {
    padding: 0.375rem !important;
  }

  .zoom-controls-mobile svg {
    width: 1rem !important;
    height: 1rem !important;
  }
}

/* Prevent zoom on double-tap (iOS Safari) */
@media (max-width: 768px) {

  button,
  a,
  input,
  select,
  textarea {
    touch-action: manipulation;
  }
}

/* High DPI displays (Retina) */
@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {

  /* Ensure crisp rendering */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}